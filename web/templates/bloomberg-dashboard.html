<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Nickberg Terminal</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”®</text></svg>">
    <link rel="stylesheet" href="/static/css/bloomberg-theme.css?v=1000">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Force ticker visibility - debug styles */
        .news-ticker-container {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            z-index: 9999 !important;
        }
        /* Hide any lingering chart elements */
        #sentimentChart, .chart-container, .mini-chart, canvas {
            display: none !important;
            visibility: hidden !important;
        }
    </style>
    <script>
        // Clear any service workers and force reload if needed
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function(registrations) {
                for(let registration of registrations) {
                    registration.unregister();
                }
            });
        }
    </script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-radar"></i>
                <h1>NICKBERG TERMINAL</h1>
            </div>
            <div class="keyboard-hint" onclick="toggleHelpOverlay()">
                <i class="fas fa-keyboard"></i>
                <span>Press <kbd>?</kbd> for shortcuts</span>
            </div>
            <div class="header-actions">
                <button id="searchBtn" class="btn search-btn" title="Search (Ctrl+K)">
                    <i class="fas fa-search"></i>
                    <span class="search-shortcut">Ctrl+K</span>
                </button>
                <button id="refreshBtn" class="btn">
                    <i class="fas fa-sync-alt"></i> REFRESH
                </button>
                <button id="runBotBtn" class="btn">
                    <i class="fas fa-play"></i> RUN NOW
                </button>
            </div>
        </header>

        <!-- Bloomberg-style Command Line -->
        <div class="command-bar">
            <span class="command-prompt">&gt;</span>
            <input type="text" id="commandInput" class="command-input" placeholder="Enter ticker (e.g., AAPL) or function..." autocomplete="off">
            <button class="command-btn" onclick="executeCommand()">
                <i class="fas fa-arrow-right"></i>
            </button>
            <div class="command-help">
                <kbd>ENTER</kbd> to search | <kbd>ESC</kbd> to close
            </div>
        </div>

        <!-- Stock Details Panel (hidden by default) -->
        <div id="stockDetailsPanel" class="stock-details-panel" style="display: none;">
            <div class="stock-details-header">
                <div class="stock-main-info">
                    <span class="stock-detail-symbol" id="detailSymbol">AAPL</span>
                    <span class="stock-detail-name" id="detailName">Apple Inc.</span>
                </div>
                <div class="stock-main-price">
                    <span class="stock-detail-price" id="detailPrice">$150.25</span>
                    <span class="stock-detail-change" id="detailChange">â–² +2.50 (+1.69%)</span>
                </div>
                <button class="stock-details-close" onclick="closeStockDetails()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="stock-details-grid">
                <div class="stock-stat">
                    <span class="stat-label">Day High</span>
                    <span class="stat-value" id="detailHigh">152.30</span>
                </div>
                <div class="stock-stat">
                    <span class="stat-label">Day Low</span>
                    <span class="stat-value" id="detailLow">148.90</span>
                </div>
                <div class="stock-stat">
                    <span class="stat-label">Volume</span>
                    <span class="stat-value" id="detailVolume">45.2M</span>
                </div>
                <div class="stock-stat">
                    <span class="stat-label">Avg Volume</span>
                    <span class="stat-value" id="detailAvgVol">52.1M</span>
                </div>
                <div class="stock-stat">
                    <span class="stat-label">Market Cap</span>
                    <span class="stat-value" id="detailMarketCap">$2.4T</span>
                </div>
                <div class="stock-stat">
                    <span class="stat-label">P/E Ratio</span>
                    <span class="stat-value" id="detailPE">28.5</span>
                </div>
            </div>
            <div class="stock-mentions-section" id="detailMentionsSection">
                <div class="section-title">RECENT MENTIONS (<span id="detailMentionsCount">0</span>)</div>
                <div class="stock-mentions-list" id="detailMentionsList">
                    <!-- Mentions populated dynamically -->
                </div>
            </div>
        </div>

        <!-- Status Bar - Key Stats -->
        <div class="status-bar-top">
            <div class="stat-item">
                <span class="stat-label">ARTICLES:</span>
                <span class="stat-value" id="totalArticles">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">MENTIONS:</span>
                <span class="stat-value" id="totalMentions">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">ALERTS:</span>
                <span class="stat-value red" id="totalAlerts">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">24H:</span>
                <span class="stat-value green" id="articles24h">-</span>
            </div>
            <div class="stat-item" style="margin-left: auto;">
                <span class="stat-label">LAST:</span>
                <span class="stat-value" id="lastUpdated">--:--:--</span>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i> DASHBOARD
            </button>
            <button class="nav-tab" data-tab="settings">
                <i class="fas fa-cog"></i> SETTINGS
            </button>
        </nav>

        <!-- Dashboard Tab Content -->
        <div id="dashboardTab" class="tab-content active">
            <!-- Main Terminal Grid -->
            <div class="terminal-grid">
                <!-- Articles Feed Panel -->
                <div class="panel articles-panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-newspaper"></i> ARTICLES FEED</h2>
                        <select id="articleFilter" class="filter-select">
                            <option value="all">ALL SOURCES</option>
                        </select>
                    </div>
                    <div class="panel-body">
                        <div id="articlesList" class="articles-list">
                            <div class="loading">LOADING ARTICLES...</div>
                        </div>
                    </div>
                </div>

                <!-- Market Monitor Panel (Bloomberg-style) -->
                <div class="panel">
                    <div class="panel-header">
                        <h2><i class="fas fa-globe"></i> MARKET MONITOR</h2>
                        <span class="badge" id="marketStatus">LIVE</span>
                    </div>
                    <div class="panel-body">
                        <div class="market-monitor">
                            <!-- Major Indices -->
                            <div class="market-section">
                                <div class="section-header">INDICES</div>
                                <div id="indicesList" class="indices-list">
                                    <div class="market-item">
                                        <span class="market-symbol">SPX</span>
                                        <span class="market-price">--.--</span>
                                        <span class="market-change flat">--.--</span>
                                    </div>
                                    <div class="market-item">
                                        <span class="market-symbol">DJI</span>
                                        <span class="market-price">--.--</span>
                                        <span class="market-change flat">--.--</span>
                                    </div>
                                    <div class="market-item">
                                        <span class="market-symbol">IXIC</span>
                                        <span class="market-price">--.--</span>
                                        <span class="market-change flat">--.--</span>
                                    </div>
                                    <div class="market-item">
                                        <span class="market-symbol">RUT</span>
                                        <span class="market-price">--.--</span>
                                        <span class="market-change flat">--.--</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Gainers/Losers Toggle -->
                            <div class="market-tabs">
                                <button class="market-tab active" data-tab="gainers">GAINERS</button>
                                <button class="market-tab" data-tab="losers">LOSERS</button>
                                <button class="market-tab" data-tab="active">MOST ACTIVE</button>
                            </div>
                            
                            <div id="marketMovers" class="movers-list">
                                <div class="loading">LOADING...</div>
                            </div>

                            <!-- Economic Calendar -->
                            <div class="economic-calendar-section">
                                <div class="section-header" style="margin-top: 12px;">
                                    <i class="fas fa-calendar-alt"></i> ECONOMIC CALENDAR
                                </div>
                                <div id="economicCalendar" class="economic-calendar-list">
                                    <div class="loading">LOADING EVENTS...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bluesky Financial Feed Panel (Full Size) -->
                <div class="panel bluesky-panel-full">
                    <div class="panel-header">
                        <h2><i class="fas fa-cloud"></i> BLUESKY FINANCE</h2>
                        <span class="badge" style="background: #1185fe; color: white;">LIVE</span>
                    </div>
                    <div class="panel-body" style="padding: 0;">
                        <div class="bluesky-feed-full" id="blueskyFeedFull">
                            <div class="bluesky-loading">
                                <i class="fas fa-spinner fa-spin"></i>
                                <span>Loading Bluesky feed...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scrolling News Ticker -->
            <div class="news-ticker-container" id="newsTickerContainer">
                <div class="ticker-label">MARKETS</div>
                <div class="ticker-scroll">
                    <div class="ticker-content" id="newsTicker">
                        <span class="stock-ticker-item">
                            <span class="stock-symbol">LOADING</span>
                            <span class="stock-price">--.--</span>
                            <span class="stock-change flat">â€”0.00%</span>
                        </span>
                    </div>
                </div>
                <div class="ticker-controls">
                    <button id="pauseTicker" title="Pause/Resume">
                        <i class="fas fa-pause"></i>
                    </button>
                </div>
            </div>

            <!-- Bottom Status Bar -->
            <div class="status-bar">
                <span id="systemStatus">SYSTEM READY</span>
                <span style="color: var(--accent-orange); font-size: 11px;">v2.0 - NICKBERG TERMINAL</span>
                <span id="statusIndicator" class="status">
                    <i class="fas fa-circle"></i> CONNECTED
                </span>
            </div>
        </div>

        <!-- Settings Tab Content -->
        <div id="settingsTab" class="tab-content">
            <div class="settings-container">
                <!-- Watchlist Management -->
                <div class="settings-section">
                    <div class="settings-section-header">
                        <h3><i class="fas fa-list"></i> WATCHLIST MANAGEMENT</h3>
                    </div>
                    <div class="settings-section-body">
                        <p class="setting-label-hint" style="margin-bottom: 12px;">
                            Add or remove companies from your monitoring watchlist.
                        </p>
                        <div class="tag-input-container">
                            <div id="watchlistTags" class="tag-list">
                                <!-- Tags will be populated dynamically -->
                            </div>
                            <div class="tag-add-form">
                                <input type="text" id="tickerInput" placeholder="TICKER (e.g., AAPL)" maxlength="5">
                                <input type="text" id="namesInput" placeholder="NAMES (comma-separated)">
                                <button type="button" class="btn" id="addTickerBtn">
                                    <i class="fas fa-plus"></i> ADD
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alert Channels -->
                <div class="settings-section">
                    <div class="settings-section-header">
                        <h3><i class="fas fa-bell"></i> ALERT CHANNELS</h3>
                    </div>
                    <div class="settings-section-body">
                        <div class="setting-row">
                            <div class="setting-label">
                                <span class="setting-label-text">Console Output</span>
                                <span class="setting-label-hint">Display alerts in terminal</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="channelConsole" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-row">
                            <div class="setting-label">
                                <span class="setting-label-text">File Logging</span>
                                <span class="setting-label-hint">Save alerts to log file</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="channelFile" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-row">
                            <div class="setting-label">
                                <span class="setting-label-text">Telegram Notifications</span>
                                <span class="setting-label-hint">Send alerts via Telegram bot</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="channelTelegram">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="setting-row">
                            <div class="setting-label">
                                <span class="setting-label-text">Webhook</span>
                                <span class="setting-label-hint">POST alerts to external webhook</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="channelWebhook">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Severity Routing -->
                <div class="settings-section">
                    <div class="settings-section-header">
                        <h3><i class="fas fa-route"></i> SEVERITY ROUTING</h3>
                    </div>
                    <div class="settings-section-body">
                        <p class="setting-label-hint" style="margin-bottom: 12px;">
                            Configure which channels receive alerts for each severity level.
                        </p>
                        <table class="routing-table">
                            <thead>
                                <tr>
                                    <th>SEVERITY</th>
                                    <th>CONSOLE</th>
                                    <th>FILE</th>
                                    <th>TELEGRAM</th>
                                    <th>WEBHOOK</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="severity-label high"><i class="fas fa-exclamation-circle"></i> HIGH</span></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="high" data-channel="console" checked></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="high" data-channel="file" checked></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="high" data-channel="telegram" checked></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="high" data-channel="webhook" checked></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-label medium"><i class="fas fa-exclamation-triangle"></i> MEDIUM</span></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="medium" data-channel="console" checked></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="medium" data-channel="file" checked></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="medium" data-channel="telegram"></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="medium" data-channel="webhook"></td>
                                </tr>
                                <tr>
                                    <td><span class="severity-label low"><i class="fas fa-info-circle"></i> LOW</span></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="low" data-channel="console"></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="low" data-channel="file" checked></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="low" data-channel="telegram"></td>
                                    <td><input type="checkbox" class="routing-checkbox" data-severity="low" data-channel="webhook"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pattern Thresholds -->
                <div class="settings-section">
                    <div class="settings-section-header">
                        <h3><i class="fas fa-sliders-h"></i> PATTERN THRESHOLDS</h3>
                    </div>
                    <div class="settings-section-body">
                        <div class="setting-row">
                            <div class="setting-label">
                                <span class="setting-label-text">Volume Spike Threshold</span>
                                <span class="setting-label-hint">Multiplier vs 7-day average to trigger alert</span>
                            </div>
                            <div class="slider-container">
                                <input type="range" class="slider-input" id="volumeThreshold" min="1" max="10" step="0.5" value="3">
                                <span class="slider-value" id="volumeThresholdValue">3.0x</span>
                            </div>
                        </div>
                        <div class="setting-row">
                            <div class="setting-label">
                                <span class="setting-label-text">Minimum Articles</span>
                                <span class="setting-label-hint">Minimum articles required to trigger alert</span>
                            </div>
                            <input type="number" class="number-input" id="minArticles" min="1" max="50" value="3">
                        </div>
                        <div class="setting-row">
                            <div class="setting-label">
                                <span class="setting-label-text">Sentiment Shift Threshold</span>
                                <span class="setting-label-hint">Minimum sentiment change to trigger alert</span>
                            </div>
                            <div class="slider-container">
                                <input type="range" class="slider-input" id="sentimentThreshold" min="0.1" max="1" step="0.1" value="0.3">
                                <span class="slider-value" id="sentimentThresholdValue">0.3</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Per-Company Preferences -->
                <div class="settings-section">
                    <div class="settings-section-header">
                        <h3><i class="fas fa-building"></i> PER-COMPANY PREFERENCES</h3>
                    </div>
                    <div class="settings-section-body">
                        <p class="setting-label-hint" style="margin-bottom: 12px;">
                            Configure alert settings for specific companies. Leave empty to use default settings.
                        </p>
                        <div id="companyPreferences" class="settings-grid">
                            <!-- Company preference cards will be populated dynamically -->
                        </div>
                        <div id="noCompanyPrefs" class="empty-state" style="padding: 16px;">
                            <p>Add companies to the watchlist to configure per-company preferences.</p>
                        </div>
                    </div>
                </div>

                <!-- Save Button -->
                <div class="save-btn-container">
                    <button type="button" class="btn-save" id="saveSettingsBtn">
                        <i class="fas fa-save"></i> SAVE SETTINGS
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Stock Detail Modal -->
    <div id="stockDetailModal" class="stock-detail-modal" style="display: none;">
        <div class="stock-modal-overlay" onclick="closeStockModal()"></div>
        <div class="stock-modal-content">
            <div class="stock-modal-header">
                <div class="stock-modal-title">
                    <span class="stock-modal-symbol" id="modalSymbol">AAPL</span>
                    <span class="stock-modal-name" id="modalName">Apple Inc.</span>
                </div>
                <div class="stock-modal-price">
                    <span class="stock-modal-price-value" id="modalPrice">$185.42</span>
                    <span class="stock-modal-change" id="modalChange">â–² +2.35 (+1.28%)</span>
                </div>
                <button class="stock-modal-close" onclick="closeStockModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Quick Stats Grid -->
            <div class="stock-modal-stats">
                <div class="stat-box">
                    <span class="stat-box-label">Market Cap</span>
                    <span class="stat-box-value" id="modalMarketCap">2.8T</span>
                </div>
                <div class="stat-box">
                    <span class="stat-box-label">P/E Ratio</span>
                    <span class="stat-box-value" id="modalPE">28.5</span>
                </div>
                <div class="stat-box">
                    <span class="stat-box-label">Volume</span>
                    <span class="stat-box-value" id="modalVolume">52.4M</span>
                </div>
                <div class="stat-box">
                    <span class="stat-box-label">Avg Volume</span>
                    <span class="stat-box-value" id="modalAvgVol">48.0M</span>
                </div>
                <div class="stat-box">
                    <span class="stat-box-label">52W High</span>
                    <span class="stat-box-value" id="modal52High">198.23</span>
                </div>
                <div class="stat-box">
                    <span class="stat-box-label">52W Low</span>
                    <span class="stat-box-value" id="modal52Low">142.50</span>
                </div>
                <div class="stat-box">
                    <span class="stat-box-label">Open</span>
                    <span class="stat-box-value" id="modalOpen">183.80</span>
                </div>
                <div class="stat-box">
                    <span class="stat-box-label">Prev Close</span>
                    <span class="stat-box-value" id="modalPrevClose">183.07</span>
                </div>
            </div>
            
            <!-- Chart Section -->
            <div class="stock-modal-chart-section">
                <div class="chart-controls">
                    <button class="chart-period-btn active" data-period="1d" onclick="changeChartPeriod('1d')">1D</button>
                    <button class="chart-period-btn" data-period="5d" onclick="changeChartPeriod('5d')">1W</button>
                    <button class="chart-period-btn" data-period="1mo" onclick="changeChartPeriod('1mo')">1M</button>
                    <button class="chart-period-btn" data-period="3mo" onclick="changeChartPeriod('3mo')">3M</button>
                    <button class="chart-period-btn" data-period="1y" onclick="changeChartPeriod('1y')">1Y</button>
                </div>
                <div class="chart-container">
                    <canvas id="stockChart"></canvas>
                </div>
            </div>
            
            <!-- Company Info -->
            <div class="stock-modal-info">
                <div class="info-row">
                    <span class="info-label">Sector:</span>
                    <span class="info-value" id="modalSector">Technology</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Industry:</span>
                    <span class="info-value" id="modalIndustry">Consumer Electronics</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Employees:</span>
                    <span class="info-value" id="modalEmployees">161,000</span>
                </div>
                <div class="info-row" id="modalEPSRow">
                    <span class="info-label">EPS:</span>
                    <span class="info-value" id="modalEPS">$6.50</span>
                </div>
                <div class="info-row" id="modalDivYieldRow">
                    <span class="info-label">Dividend Yield:</span>
                    <span class="info-value" id="modalDivYield">0.55%</span>
                </div>
            </div>
            
            <!-- Description -->
            <div class="stock-modal-description">
                <p id="modalDescription">Apple Inc. designs, manufactures, and markets smartphones, personal computers, tablets, wearables, and accessories worldwide.</p>
            </div>
            
            <!-- Related News -->
            <div class="stock-modal-news">
                <h3><i class="fas fa-newspaper"></i> Related News</h3>
                <div id="modalNewsList" class="news-list">
                    <!-- News items populated dynamically -->
                </div>
            </div>
            
            <!-- External Links -->
            <div class="stock-modal-links">
                <a id="modalWebsite" href="#" target="_blank" rel="noopener" class="stock-link">
                    <i class="fas fa-globe"></i> Website
                </a>
                <a id="modalYahooLink" href="#" target="_blank" rel="noopener" class="stock-link">
                    <i class="fab fa-yahoo"></i> Yahoo Finance
                </a>
                <a id="modalSECLink" href="#" target="_blank" rel="noopener" class="stock-link">
                    <i class="fas fa-file-alt"></i> SEC Filings
                </a>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Search Overlay -->
    <div id="searchOverlay" class="search-overlay">
        <div class="search-container">
            <!-- Search Header -->
            <div class="search-header">
                <div class="search-input-wrapper">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search articles, companies, alerts..." autocomplete="off">
                    <button id="searchClearBtn" class="search-clear" title="Clear">
                        <i class="fas fa-times"></i>
                    </button>
                    <kbd class="search-kbd">ESC</kbd>
                </div>
                <button id="searchCloseBtn" class="search-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Search Content -->
            <div class="search-content">
                <!-- Filters Sidebar -->
                <div class="search-filters">
                    <div class="filter-section">
                        <h4><i class="fas fa-filter"></i> FILTERS</h4>
                        
                        <!-- Date Range -->
                        <div class="filter-group">
                            <label class="filter-label">DATE RANGE</label>
                            <select id="searchDateRange" class="filter-select">
                                <option value="">All Time</option>
                                <option value="today">Today</option>
                                <option value="yesterday">Yesterday</option>
                                <option value="7d">Last 7 Days</option>
                                <option value="30d">Last 30 Days</option>
                                <option value="custom">Custom Range</option>
                            </select>
                            <div id="customDateRange" class="custom-date-range" style="display: none;">
                                <input type="date" id="dateFrom" class="date-input">
                                <span>to</span>
                                <input type="date" id="dateTo" class="date-input">
                            </div>
                        </div>

                        <!-- Sources -->
                        <div class="filter-group">
                            <label class="filter-label">SOURCES</label>
                            <div id="searchSources" class="filter-checkboxes">
                                <div class="loading-small">Loading sources...</div>
                            </div>
                        </div>

                        <!-- Sentiment -->
                        <div class="filter-group">
                            <label class="filter-label">SENTIMENT</label>
                            <select id="searchSentiment" class="filter-select">
                                <option value="">All</option>
                                <option value="positive">Positive</option>
                                <option value="negative">Negative</option>
                                <option value="neutral">Neutral</option>
                            </select>
                        </div>

                        <!-- Tickers -->
                        <div class="filter-group">
                            <label class="filter-label">TICKERS</label>
                            <div class="ticker-tag-input">
                                <input type="text" id="searchTickerInput" placeholder="Add ticker...">
                                <button id="addSearchTickerBtn"><i class="fas fa-plus"></i></button>
                            </div>
                            <div id="searchTickerTags" class="ticker-tags"></div>
                        </div>

                        <!-- Min Mentions (for companies) -->
                        <div class="filter-group">
                            <label class="filter-label">MIN MENTIONS</label>
                            <input type="number" id="searchMinMentions" class="number-input" min="1" value="1">
                        </div>

                        <button id="clearFiltersBtn" class="clear-filters-btn">
                            <i class="fas fa-undo"></i> Clear Filters
                        </button>
                    </div>

                    <!-- Recent Searches -->
                    <div class="filter-section recent-searches-section">
                        <h4><i class="fas fa-history"></i> RECENT</h4>
                        <div id="recentSearches" class="recent-searches-list">
                            <span class="empty-text">No recent searches</span>
                        </div>
                    </div>
                </div>

                <!-- Results Area -->
                <div class="search-results-area">
                    <!-- Tab Navigation -->
                    <div class="search-tabs">
                        <button class="search-tab active" data-tab="all">
                            <i class="fas fa-th-large"></i> ALL
                            <span id="countAll" class="result-count">0</span>
                        </button>
                        <button class="search-tab" data-tab="articles">
                            <i class="fas fa-newspaper"></i> ARTICLES
                            <span id="countArticles" class="result-count">0</span>
                        </button>
                        <button class="search-tab" data-tab="companies">
                            <i class="fas fa-building"></i> COMPANIES
                            <span id="countCompanies" class="result-count">0</span>
                        </button>
                        <button class="search-tab" data-tab="alerts">
                            <i class="fas fa-bell"></i> ALERTS
                            <span id="countAlerts" class="result-count">0</span>
                        </button>
                        
                        <div class="search-sort">
                            <select id="searchSort" class="sort-select">
                                <option value="relevance">Relevance</option>
                                <option value="date_desc">Date (Newest)</option>
                                <option value="date_asc">Date (Oldest)</option>
                                <option value="mentions">Mentions</option>
                            </select>
                        </div>
                    </div>

                    <!-- Results Content -->
                    <div class="search-results-content">
                        <div id="searchResultsList" class="search-results-list">
                            <div class="search-placeholder">
                                <i class="fas fa-search"></i>
                                <p>Start typing to search...</p>
                                <span class="search-hint">Use filters to narrow results</span>
                            </div>
                        </div>
                    </div>

                    <!-- Search Pagination -->
                    <div id="searchPagination" class="search-pagination" style="display: none;">
                        <button id="prevPageBtn" class="page-btn" disabled>
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <span id="pageInfo" class="page-info">Page 1 of 1</span>
                        <button id="nextPageBtn" class="page-btn" disabled>
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Search Footer -->
            <div class="search-footer">
                <div class="search-status">
                    <span id="searchStatus">Ready</span>
                </div>
                <div class="search-shortcuts">
                    <kbd>â†‘â†“</kbd> Navigate <kbd>Enter</kbd> Open <kbd>Esc</kbd> Close
                </div>
            </div>
        </div>
    </div>

    <!-- Chart.js for charts (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- Dashboard JavaScript -->
    <script src="/static/js/dashboard.js?v=1000"></script>
</body>
</html>
